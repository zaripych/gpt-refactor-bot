---
'refactor-bot': patch
---

feat: improve benchmarking command

Introduce changes to the report generated by the refactor bot so that we can get
better benchmark stats.

The benchmark command now outputs `promptTokens` and `completionTokens`.

The report generated by the benchmark command has been improved to include
difference comparison, outliers and a list of the refactors with lowest scores.

Example:

```sh
   Benchmark results

           METRIC         │     A     │     B     │  DIFF
  ────────────────────────┼───────────┼───────────┼──────────
    numberOfRuns          │      9.00 │     10.00 │
    score                 │      0.83 │      1.00 │ +17.28%
    acceptedRatio         │      0.81 │      1.00 │ +18.52%
    totalTokens           │  44688.67 │  50365.90 │ +12.70%
    totalPromptTokens     │  40015.44 │  48283.30 │ +20.66%
    totalCompletionTokens │   4673.22 │   2082.60 │ -55.44%
    wastedTokensRatio     │      0.09 │      0.00 │ -9.49%
    durationMs            │ 286141.39 │ 171294.32 │ -40.14%
```
